<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Scientific Python <br><p>Jóan Petur Petersen</p></title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="file:///Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/landslide-1.0.1-py2.7.egg/landslide/themes/default/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="file:///Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/landslide-1.0.1-py2.7.egg/landslide/themes/default/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="file:///Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/landslide-1.0.1-py2.7.egg/landslide/themes/default/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Scientific Python <br><p>Jóan Petur Petersen</p></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              1/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Background</h1></header>
            
            
            <section><ul>
<li>Worked on an industrial Ph. D. with DTU and GreenSteam.</li>
<li>Used python troughout the project<ul>
<li>Data collection</li>
<li>Data processing</li>
<li>Modelling</li>
<li>Data presentation</li>
<li>Deployment</li>
</ul>
</li>
</ul>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Python can help you in all these steps from the beginning to the end, and it can
be done to a large part in and efficient and fast way.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              2/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Outline</h1></header>
            
            
            <section><ul>
<li>Native Python memory and speed</li>
<li>Numpy introduction (matrix manipulation)</li>
<li>Ipython and Matplotlib (visualization)</li>
</ul>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>We'll start of looking at how native python works memory and speed wise.
As you might already know most Python interpreters aren't very fast, so this
will affect the way you would implement algorithms and manage data processing
for scientific computing.</p>
<p>Then we'll look at a library for presenting matrices and matrix operations. This
is probably one of the most commonly used libraries in scientific python.</p>
<p>Finally we'll look at Matploblib, which is a nice 2d plotting library for Python.</p>
<p>Python is a high-level general-purpose interpreted programming language [http://en.wikipedia.org/wiki/Python_(programming_language)].</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              3/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Native Python</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>This talk assumes you know some python, and that you are familiar with Matlab, or similar
programs.</p>
<p>So we will look at the subtle differences and pitfalls one might encounter when starting out
with NumPy.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              4/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Python and memory usage</h1></header>
            
            
            <section><p>Install memory profiler: <code>pip install -U memory_profiler</code></p>
<p>Let's make a 1000x1000 demo matrix:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="nd">@profile</span>
<span class="lineno"> 2</span> <span class="k">def</span> <span class="nf">make_matrix</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
<span class="lineno"> 3</span>     <span class="n">matrix_2d</span> <span class="o">=</span> <span class="p">[]</span>
<span class="lineno"> 4</span>     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
<span class="lineno"> 5</span>         <span class="n">repeat_me</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="lineno"> 6</span>         <span class="n">matrix_2d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">repeat_me</span><span class="p">)</span>
<span class="lineno"> 7</span>     <span class="k">return</span> <span class="n">matrix_2d</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
<span class="lineno">10</span>     <span class="n">make_matrix</span><span class="p">()</span>
</pre></div>

</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>If you want to run this without memory profiling, you can create a dummy
decorator:</p>
<p>def profile(fn):
    def wrapped(): return fn()
    return wrapped</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              5/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Python and memory usage</h1></header>
            
            
            <section><p>Run the program using a memory profiler:</p>
<pre><code>&gt;&gt;&gt; python -m memory_profiler profile_make_matrix.py
Filename: profile_make_matrix.py

Line #    Mem usage    Increment   Line Contents
================================================
     2                             @profile
     3      6.03 MB      0.00 MB   def make_matrix(N=1000):
     4      6.04 MB      0.00 MB       matrix_2d = []
     5     18.86 MB     12.83 MB       for i in xrange(N):
     6     18.88 MB      0.01 MB           repeat_me = range(N)
     7     18.88 MB      0.00 MB           matrix_2d.append(repeat_me)
     8     18.88 MB      0.00 MB       return matrix_2d
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              6/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Python and memory usage</h1></header>
            
            
            <section><p>Use <code>sys.getsizeof(object)</code> to find the actual memory used by an object:</p>
<pre><code>&gt;&gt;&gt; import sys
&gt;&gt;&gt; a = [1]
&gt;&gt;&gt; sys.getsizeof(a)
40
&gt;&gt;&gt; sys.getsizeof(a[0])
12
&gt;&gt;&gt; sys.getsizeof(range(1))
40
&gt;&gt;&gt; sys.getsizeof(range(2))
44
&gt;&gt;&gt; sys.getsizeof(range(3))
48
&gt;&gt;&gt; sys.getsizeof(range(1000))
4036
</code></pre>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p><code>sys.getsizeof()</code> returns the size of memory footprint in bytes of objects.
In some python versions container objects it will return the size of only the container object.
The list contains references to the objects, and it can be hard to figure out the
memory consumption, because the interpreter tries to reuse references to objects.</p>
<p>Non-native Python code, such as C code, might also allocate memory without Python's knowledge.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              7/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Python and speed (or lack thereof)</h1></header>
            
            
            <section><p>A very brute mean function:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="k">def</span> <span class="nf">calc_mean</span><span class="p">(</span><span class="n">list_matrix</span><span class="p">):</span>
<span class="lineno"> 2</span>     <span class="sd">&quot;&quot;&quot;Returns the mean of a matrix given as a list of lists.</span>
<span class="lineno"> 3</span> <span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno"> 4</span>     <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="lineno"> 5</span>     <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
<span class="lineno"> 6</span>     <span class="k">for</span> <span class="n">lst</span> <span class="ow">in</span> <span class="n">list_matrix</span><span class="p">:</span>
<span class="lineno"> 7</span>         <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
<span class="lineno"> 8</span>             <span class="n">total</span> <span class="o">+=</span> <span class="n">number</span>
<span class="lineno"> 9</span>             <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="lineno">10</span>     <span class="k">return</span> <span class="p">(</span><span class="mf">1.</span><span class="o">*</span><span class="n">total</span><span class="p">)</span> <span class="o">/</span> <span class="n">cnt</span>
</pre></div>

</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>See more at http://scikit-learn.org/dev/developers/performance.html</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              8/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Python and speed (or lack thereof)</h1></header>
            
            
            <section><pre><code>In [43]: %prun calc_mean(m)
         3 function calls in 0.159 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.159    0.159    0.159    0.159 calc_mean.py:2(calc_mean)
        1    0.000    0.000    0.159    0.159 &lt;string&gt;:1(&lt;module&gt;)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              9/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>IPython line profiler</h1></header>
            
            
            <section><p><code>%prun</code> only times function calls.</p>
<p>line_profiler can report per line.</p>
<pre><code>%lprun -f calc_mean calc_mean(m)
Timer unit: 1e-06 s

File: calc_mean.py
Function: calc_mean at line 2
Total time: 4.27212 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     2                                           def calc_mean(list_matrix):
     3                                               """Returns the mean of a matrix given as a list of lists.
     4                                               """
     5         1           11     11.0      0.0      total = 0
     6         1            1      1.0      0.0      cnt = 0
     7      1001         1497      1.5      0.0      for lst in list_matrix:
     8   1001000      1352026      1.4     31.6          for number in lst:
     9   1000000      1412441      1.4     33.1              total += number
    10   1000000      1506138      1.5     35.3              cnt += 1
    11         1            4      4.0      0.0      return (1.*total) / cnt
</code></pre>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>It is interesting to note how the innermost loop takes the most of the time.
Each line in the inner loop accounts for almost 1/3 of the total execution time
each.</p>
<p>Scikit has a nice page on optimization:
http://scikit-learn.org/dev/developers/performance.html</p>
<p>line_profiler doc: http://packages.python.org/line_profiler/</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              10/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Numpy introduction</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              11/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>NumPy</h1></header>
            
            
            <section><p>Why should we use NumPy?</p>
<ul>
<li>NumPy arrays are more compact than python lists</li>
<li>Large library of implemeted functions</li>
<li>Computationally faster than using native python lists</li>
</ul>
<p><br></p>
<h2>Getting started</h2>
<ul>
<li>Matlab users: <a href="http://www.scipy.org/NumPy_for_Matlab_Users">http://www.scipy.org/NumPy_for_Matlab_Users</a></li>
<li>Tutorial: <a href="http://www.scipy.org/Tentative_NumPy_Tutorial">http://www.scipy.org/Tentative_NumPy_Tutorial</a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              12/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Recreating examples</h1></header>
            
            
            <section><p>We create the same 1000x1000 matrix with Numpy:</p>
<pre><code>import numpy as np

def make_matrix(N=1000):
    row = np.array(range(1000), dtype=np.int32)
    return np.tile(row, (1000,1))
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              13/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Recreating examples</h1></header>
            
            
            <section><pre><code>&gt;&gt; python -m memory_profiler profile_make_matrix_numpy.py 
Filename: profile_make_matrix_numpy.py

Line #    Mem usage    Increment   Line Contents
================================================
     3                             @profile
     4     11.36 MB      0.00 MB   def make_matrix(N=1000):
     5     11.37 MB      0.00 MB       row = np.array(range(1000), dtype=np.int32)
     6     15.21 MB      3.85 MB       return np.tile(row, (1000,1))
</code></pre>
<p>And speed:</p>
<pre><code>In [5]: %prun np.mean(m)
         4 function calls in 0.003 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.003    0.003    0.003    0.003 {method 'mean' of 'numpy.ndarray' objects}
        1    0.000    0.000    0.003    0.003 fromnumeric.py:2299(mean)
        1    0.000    0.000    0.003    0.003 &lt;string&gt;:1(&lt;module&gt;)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
</code></pre>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Note here that we specify the type for the hole array. Numpy arrays are
homogeneous, that is all entries have the same type. This saves all the spaced
used for keeping each element's type as in the list of lists simple type of
matrix.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              14/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>NumPy array</h1></header>
            
            
            <section><p>An array in NumPy can be created this way:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="lineno">2</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
</pre></div>

<p>So there are kind of many brackets here. In Matlab it would just have been:</p>
<pre><code>&gt;&gt; X = [1,2; 3,4]
</code></pre>
<p>The NumPy matrix class helps a bit:</p>
<pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; X = np.matrix('1 2; 3 4')
</code></pre>
<p>If we have <code>from numpy import *</code> then we might write it as:</p>
<pre><code>&gt;&gt;&gt; from numpy import *
&gt;&gt;&gt; X = matrix('1,2; 3,4')
</code></pre>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>The NumPy matrix is always 2D, and retains its 2D nature through operations.</p>
<p>But normally I don't use the matrix class. One of the reasons being that I just
started with the array class, and this is also what most of the Numpy methods
will return.</p>
<p>It seems like Numpy is a kind of second grade citizen in Python. The notation
isn't really nice for it. But then again; Python is a general purpose language.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              15/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Numpy - references</h1></header>
            
            
            <section><p>There might be some nasty surprises using NumPy arrays:</p>
<pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; X = np.array([[1,2],[3,4]])
&gt;&gt;&gt; Y = X
&gt;&gt;&gt; print X
[[1 2]
 [3 4]]
&gt;&gt;&gt; print Y
[[1 2]
 [3 4]]
&gt;&gt;&gt; X[0,0] = 0
&gt;&gt;&gt; print X
[[0 2]
 [3 4]]
&gt;&gt;&gt; print Y
[[0 2]
 [3 4]]
</code></pre>
<p>Simple trick to avoid this: <code>Y = 1*X</code> (makes a copy)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              16/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Numpy - slicing arrays</h1></header>
            
            
            <section><pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; X = np.array([[1,2],[3,4]])
&gt;&gt;&gt; print X
[[1 2]
 [3 4]]
&gt;&gt;&gt; print X[0]
[1 2]
&gt;&gt;&gt; print X[0,:]
[1 2]
&gt;&gt;&gt; print X[:,0]
[1 3]
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              17/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>NumPy - slicing arrays</h1></header>
            
            
            <section><p>There might be some surprises using NumPy arrays:</p>
<pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; X = np.array([[1,2],[3,4]])
&gt;&gt;&gt; X.shape
(2, 2)
&gt;&gt;&gt; X1 = X[:,0]
&gt;&gt;&gt; X1.shape
(2,)
</code></pre>
<p>So it has become a one dimensional array.</p>
<pre><code>&gt;&gt;&gt; Y = np.matrix('1,2; 3,4')
&gt;&gt;&gt; Y[:,0]
matrix([[1],
        [3]])
&gt;&gt;&gt; Y1 = Y[:,0]
&gt;&gt;&gt; Y1.shape
(2, 1)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              18/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Numpy - slicing arrays</h1></header>
            
            
            <section><pre><code>&gt;&gt;&gt; X = np.array(range(9)).reshape(3,3)
&gt;&gt;&gt; print X
[[0, 1, 2],
 [3, 4, 5],
 [6, 7, 8]])
&gt;&gt;&gt; print X[1:, 1:]
[[4 5]
 [7 8]]
&gt;&gt;&gt; print X[:1, :1]
[[0]]
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              19/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>NumPy - more slicing surprises</h1></header>
            
            
            <section><p>A slices is a reference to part of the original array.</p>
<pre><code>&gt;&gt;&gt; a = eye(3)
&gt;&gt;&gt; print a
[[ 1.  0.  0.]
 [ 0.  1.  0.]
 [ 0.  0.  1.]]
&gt;&gt;&gt; b = a[:,1]
&gt;&gt;&gt; print b
[ 0.  1.  0.]
&gt;&gt;&gt; b[1]=2
&gt;&gt;&gt; print a
[[ 1.  0.  0.]
 [ 0.  2.  0.]
 [ 0.  0.  1.]]
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              20/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Numpy - striding arrays</h1></header>
            
            
            <section><pre><code>&gt;&gt;&gt; X = np.array(range(25)).reshape(5,5)
&gt;&gt;&gt; print X
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]
 [15 16 17 18 19]
 [20 21 22 23 24]]
&gt;&gt;&gt; print X[:,::2]
[[ 0  2  4]
 [ 5  7  9]
 [10 12 14]
 [15 17 19]
 [20 22 24]]
&gt;&gt;&gt; print X[:,1::2]
[[ 1  3]
 [ 6  8]
 [11 13]
 [16 18]
 [21 23]]
</code></pre>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>More info here: http://scipy-lectures.github.com/advanced/advanced_numpy/index.html
A video here: https://www.youtube.com/watch?v=7vcjjN9eNvs</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              21/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Numpy - working with indices</h1></header>
            
            
            <section><pre><code>&gt;&gt;&gt; X = np.array(range(25)).reshape(5,5)
&gt;&gt;&gt; print X
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]
 [15 16 17 18 19]
 [20 21 22 23 24]]
&gt;&gt;&gt; B = X % 3 == 0
&gt;&gt;&gt; print B
[[ True False False  True False]
 [False  True False False  True]
 [False False  True False False]
 [ True False False  True False]
 [False  True False False  True]]
&gt;&gt;&gt; X[B] = 0
&gt;&gt;&gt; print X
[[ 0  1  2  0  4]
 [ 5  0  7  8  0]
 [10 11  0 13 14]
 [ 0 16 17  0 19]
 [20  0 22 23  0]]
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              22/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Ipython and Matplotlib</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              23/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>IPython</h1></header>
            
            
            <section><p>IPython is an enhanced Python shell.</p>
<ul>
<li>Code completion and highlighting</li>
<li>Profiling code</li>
<li>Command history</li>
</ul>
<p>Enthought has a nice installer for IPython.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              24/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>IPython magic functions</h1></header>
            
            
            <section><ul>
<li><code>%hist</code>: Show command history</li>
<li><code>%edit</code>: Open editor and execute code after closing</li>
<li><code>%prun</code>: Profile a method call</li>
<li>
<p><code>%paste</code>: Paste and run from clipboard</p>
</li>
<li>
<p><em>variable</em><code>?</code>: Show type and docstring</p>
</li>
<li><em>variable</em><code>??</code>: Show the code</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              25/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>IPython help</h1></header>
            
            
            <section><pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; np.mean?
Base Class: &lt;type 'function'&gt;
String Form:&lt;function mean at 0x12f6570&gt;
Namespace:  Interactive
File:       /Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py
Definition: np.mean(a, axis=None, dtype=None, out=None)
Docstring:
Compute the arithmetic mean along the specified axis.

Returns the average of the array elements.  The average is taken over
the flattened array by default, otherwise over the specified axis.
`float64` intermediate and return values are used for integer inputs.

Parameters
----------
a : array_like
    Array containing numbers whose mean is desired. If `a` is not an
    array, a conversion is attempted.
axis : int, optional
    Axis along which the means are computed. The default is to compute
    the mean of the flattened array.
dtype : data-type, optional
    Type to use in computing the mean.  For integer inputs, the default
    is `float64`; for floating point inputs, it is the same as the
...
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              26/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Matplotlib</h1></header>
            
            
            <section><p>Matplotlib's gallery is a good place to get inspiration:</p>
<p><a href="http://matplotlib.org/gallery.html">http://matplotlib.org/gallery.html</a></p>
<h2>IPython in pylab mode</h2>
<p>Special support for Matplotlib.pylab plots using <code>-pylab</code> (<code>--pylab</code> since IPython version 0.12).</p>
<p>Multi-threaded handling of the figures in the background.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              27/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: scientific_python.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Summary</h1></header>
            
            
            <section><h1>Libraries</h1>
<p>Some libaries that can make life easier:</p>
<ul>
<li>NumPy (matrix reprensentation, linear algebra, C/C++ code integration)</li>
<li>SciPy (optimization, more linear algebra, special functions, FFT, ODE, ...)</li>
<li>Scikit-learn (machine learning, supervised/unsupervised, model selection, ...)</li>
</ul>
<p>Visualization:</p>
<ul>
<li>Matplotlib (nice 2d plots, some support for 3d plots, maps)</li>
<li>Mayavi (3d plotting)</li>
</ul>
<p>With python you have</p>
<ul>
<li>access to a large library of well tested methods for linear algebra, optimization, machine learning, and so on.</li>
</ul>
<!-- * ...
.comment * igraph (network plots) -->

</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Wrap:</p>
<ul>
<li>Fortran, C, C++, ...</li>
<li>R</li>
</ul>
<p>And then access to all the other python libraries: os, sys, wxPython, Django, flask, ...</p>
<h1>Presenter Notes</h1>
<p>I'll just drop these:</p>
<h1>Application examples</h1>
<h1>IPython speed optimization</h1>
<p>Generally:</p>
<ul>
<li>Only optimize code that needs to be.</li>
<li>Has someone already optimized this problem?</li>
<li>Is there a better way of doing it? Another algorithm?</li>
</ul>
<p>Try to avoid python loops, especially nested loops, and write the code in such a
way that it uses numpy, scipy, and similar functions instead.</p>
<p>Cython?</p>
<h1>Resources</h1>
<ul>
<li>http://www.scipy.org/Tentative_NumPy_Tutorial</li>
<li></li>
</ul>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="scientific_python.md">scientific_python.md</a>
            </aside>
            
            <aside class="page_number">
              28/28
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Scientific Python <br><p>Jóan Petur Petersen</p></a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Background</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Outline</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Native Python</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Python and memory usage</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Python and memory usage</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Python and memory usage</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">Python and speed (or lack thereof)</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Python and speed (or lack thereof)</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">IPython line profiler</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">Numpy introduction</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">NumPy</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Recreating examples</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Recreating examples</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">NumPy array</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">Numpy - references</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Numpy - slicing arrays</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">NumPy - slicing arrays</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Numpy - slicing arrays</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">NumPy - more slicing surprises</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Numpy - striding arrays</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Numpy - working with indices</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">Ipython and Matplotlib</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">IPython</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">IPython magic functions</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">IPython help</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Matplotlib</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Summary</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>